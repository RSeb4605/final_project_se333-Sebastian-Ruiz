# MCP Tester & Tools — Quick Guide

## What is MCP?
MCP (Model Context Protocol) in this project refers to a small toolset and tester agent used to automate running the project's build/tests, collecting JaCoCo coverage, generating simple JUnit test skeletons, and producing candidate fixes or pull requests. The repository includes helper prompts and tooling that an MCP runner/agent can use to operate the test/coverage workflow for Java projects under `codebase/`.

## Requirements
- Java 11+ (for building the Java project in `codebase/`)
- Apache Maven 3.6+ (or use a Maven wrapper `mvnw`/`mvnw.cmd`)
- Python 3.8+ (for MCP helpers/scripts)
- Node.js 18+ (optional for some tooling)
- Git and a GitHub account (to push branches / open PRs)

## Quick install
1. Verify Java and Maven are installed:
	- `java -version`
	- `mvn -v` (or run the included Maven wrapper if present: `mvnw.cmd` on Windows)
2. Install the Python package manager `uv` (used to manage the MCP helper packages used in this repo):
	- `pip install uv`
3. Add the MCP helper packages (example, run from the repo root):
	- `uv add mcp[cli] httpx fastmcp`

Note: the repository expects Maven to be runnable in the environment. If you don't want to install Maven system-wide, add a Maven wrapper (`mvnw`/`mvnw.cmd`) to the repo root so the tools can run builds without a global `mvn`.

## Basic usage
- Run project tests with Maven (produces JaCoCo and surefire reports):
  - `mvn -f codebase/pom.xml clean test`
- After a successful test run, see coverage and test reports:
  - JaCoCo HTML: `codebase/target/site/jacoco/index.html`
  - Surefire reports (test failures, stack traces): `codebase/target/surefire-reports/`

## Using the tester agent (automation)
The repository includes a tester agent prompt at `.github/prompts/tester.prompts.md` that documents the intended automated workflow:

- Ensure JaCoCo is configured (the agent checks and configures `codebase/pom.xml`).
- Run `mvn clean test` to execute unit tests and produce coverage.
- Analyze coverage to find uncovered classes/lines.
- Generate JUnit test skeletons for uncovered areas and save them under `src/test/java/`.
- Collect failures and produce small patch proposals under `.mcp/fixes/` for review.

If you run the agent tools locally, follow the quick steps above to install `uv` and then use the helper packages — or run Maven directly to get tests and coverage first. 

## Troubleshooting
- If `mvn` is not found: install Apache Maven or add a Maven wrapper to the repo root.
- If test generation fails due to encoding errors (e.g. `utf-8` decode errors), ensure Java source files are saved as UTF-8. Convert any non-UTF-8 files to UTF-8 before re-running the generator.
- For automated PR creation the environment may need the GitHub CLI (`gh`) or a configured GitHub token.

## Where to look next
- Automated agent prompt: `.github/prompts/tester.prompts.md`
- Diagnostic fixes: `.mcp/fixes/` (generated by the tester agent when problems are found)

